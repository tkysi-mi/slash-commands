---
description: ローカル変更を検証し、安全なコミットとGitHubへのプッシュを行うための手順
auto_execution_mode: 1
---

# /push-to-github

## 目的

- ローカル変更をレビュー・テストした上で、適切なブランチ運用とコミットメッセージで GitHub にプッシュする。
- コンフリクトやCI失敗を未然に防ぎ、チームと共有できる状態で提出する。
- 必要なドキュメンテーション更新や追跡情報を整備した上で変更を公開する。

## 前提

- ローカルリポジトリが GitHub 上のリモート（origin）と接続されている。
- コミット対象の変更内容を把握しており、未保存ファイルや不要な変更がない。
- 動作確認に必要なテストやビルドコマンドが `run_command` で実行でき、依存ツールが揃っている。
- 認証情報（PAT / SSH鍵など）が有効で、GitHub への push 権限がある。
- プッシュ前に README / ドキュメント / ワークフローを更新する必要がある場合は、その方針を決めている。

## 手順

1. **最新状態への同期**
   - `git status` で変更状況を確認する。
   - ベースブランチを最新化する (`git fetch --prune`)。
   - 作業ブランチにチェックアウトし、必要であれば `git rebase origin/<base>` または `git merge origin/<base>` を実施する。

2. **ローカル検証**
   - 影響範囲に応じて lint、静的解析、ユニットテスト、E2Eテストなどを `run_command` で実行する。
   - Playwright MCP や Chrome DevTools MCP が必要な場合は挙動確認を行い、スクリーンショット・ログを取得する。
   - エラーが出た場合は修正し、再実行して成功を確認する。

3. **変更内容の整理とコミット準備**
   - `git status`・`git diff` を確認し、不要ファイルが含まれていないかチェックする。
   - 粒度が大きすぎる場合はコミット単位を分割する。
   - `git add` でコミット対象をステージし、`git diff --staged` で最終確認を行う。
   - コミットメッセージはチーム規約（例: Conventional Commits）に従って作成する。

4. **ドキュメントとメタ情報の更新**
   - 変更に伴い README、CHANGELOGなどを更新する必要があれば反映する。
   - Issue やタスク管理ツールとの関連を明記（コミット本文に `Fixes #123` 等）。

5. **コミットの実行**
   - `git commit` を実行し、メッセージを確定する。
   - 過去コミットの修正が必要な場合は `git commit --amend` や `git rebase -i` を利用し、履歴を整える。

6. **プッシュ前の最終確認**
   - `git status` が clean であること、不要な stash が残っていないことを確認する。
   - 直前にベースブランチへ変更が入っていないか `git fetch` で確認し、必要なら再度リベースする。

7. **GitHub へのプッシュ**
   - `git push origin <branch>` を実行する。
   - 初回プッシュでブランチが存在しない場合は `-u` オプションで追跡ブランチを設定する。
   - プッシュ結果を確認し、エラーがあればログに基づいて対処する。

8. **フォローアップ**
   - Pull Request を作成する場合はテンプレートに沿って記入し、レビュワー・ラベルを設定する。
   - CI/CD の結果を監視し、失敗があれば原因を調査する。
   - 必要に応じてチームへ通知し、変更内容・影響範囲・テスト状況を共有する。

## 完了条件

- ローカルブランチが GitHub にプッシュされ、変更内容が共有可能な状態になっている。
- テスト・Lint・CI が成功している（または合理的な理由とともに失敗を説明している）。
- 必要なドキュメント更新・Issueリンク・レビュー依頼が整備されている。

## エスカレーション

- プッシュ後のCIが失敗した場合、速やかに原因を確認し修正する。対応が難しい場合はチームリードへ報告する。
- コンフリクトが解消できない場合や、ベースブランチ側の大規模変更が原因で作業が停滞した場合は、関係者と調整する。
- セキュリティやコンプライアンスに影響する変更を含む場合は、セキュリティチームやレビュープロセスに従う。