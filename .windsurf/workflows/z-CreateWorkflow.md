---
description: 新規ワークフローを作成するときに、目的・前提・手順・品質チェック・公開・フィードバックまでを標準化し、再利用性とガバナンスを担保するための手順書
auto_execution_mode: 1
---

# /create-workflow

## 目的

- Windsurfリポジトリに新しいワークフローを追加する際の手順を標準化し、作業のばらつきを抑える。
- READMEとベストプラクティスの方針を反映し、再利用可能なドキュメントを素早く整備する。

## 前提

- 作成先リポジトリが`.windsurf/workflows/`配下でMarkdown運用されていること（@README.md）。
- Cascadeが利用可能なツール・Rules・Memoriesの権限を把握していること（@slash-commands-best-practices.md）。
- 追加するワークフローの目的・対象ユーザー・完了条件が依頼元から共有済みであること。

## 手順

1. 情報収集

   - 依頼文や関連資料を確認し、ワークフローの目的と制約を整理する。必要に応じて依頼元へ質問する。
   - `@README.md`と`@slash-commands-best-practices.md`を読み、最新ポリシー・命名規約・文字数上限（12,000文字）を再確認する。

2. スラッグとスコープを決定

   - ファイル名は用途が即座に想起できる短いスラッグにする（例: `build-and-test.md`）。
   - コマンド名(`/slug`)と対象範囲が一意であるか調査し、重複・競合があれば整理する。

3. 作成テンプレートの準備

   - セクション例: 目的 / 前提 / 手順 / 完了条件 / エスカレーション。必要に応じて入力仕様・参考リンク・検証項目を追加する。
   - YAML frontmatterは使用せず、Markdown本文のみで構成する。

4. 手順の詳細化

   - 各ステップは番号付きまたは箇条書きで、Cascadeに期待するアクションと意図を明示する。
   - 分岐は「IF ... THEN ...」、反復は「FOR EACH ...」など自然言語構文で記述し、曖昧な表現を避ける。
   - CLIやMCPツールを利用する場合は名称と目的を明記し、権限や安全策が必要ならRules/Memoriesへの依存を記述する。

5. コンテキスト最適化と参照設計

   - 長文資料は`@path/to/doc.md`形式で参照し、ワークフロー内テキストは必要最小限に保つ。
   - 他ワークフローを再利用する場合は「Call /workflow-name」と明記し、チェイン構築を想定した粒度に分割する。

6. 品質チェック

   - 以下を確認し、未達の場合は修正する。
     - コマンド名と目的が直感的か。
     - コンテキスト制限を満たし、冗長表現がないか。
     - 依存ツール・前提条件・エスカレーション手順が明示されているか。
     - 成功判定・完了報告フォーマットが定義されているか。
     - セキュリティや権限に関する注意点が必要に応じて記載されているか。

7. レビューと公開

   - 変更差分をセルフレビューし、必要ならチームレビューを依頼する。
   - `.windsurf/workflows/slug.md`を追加し、`git status`で不要な変更が含まれていないことを確認する。
   - READMEへ新しいワークフローの概要やリンクを追記する場合は同時に更新する。
   - テストや検証が必要なら実施し、得られたフィードバックを反映する。

8. フィードバックループ

   - 利用者からの改善提案を記録し、定期的に`@slash-commands-best-practices.md`へ反映を検討する。
   - 重複内容が生じた場合は統合・再編を検討し、DRY原則を維持する。

## 完了条件

- 新規ワークフローMarkdownが目的・前提・明確な手順・完了報告を備えている。
- READMEや関連資料に必要な追記が完了し、差分がレビュー可能な状態である。
- 依頼元へ成果物と差分を共有し、レビュー結果待ちの状態になっている。

## エスカレーション

- ツール権限や安全性が不明な場合は、依頼元またはリポジトリ管理者に確認し、自律的な推測で危険な操作を行わない。
- 既存ルールや他ワークフローと競合が判明した場合は、ガバナンス担当へ相談し調整する。
