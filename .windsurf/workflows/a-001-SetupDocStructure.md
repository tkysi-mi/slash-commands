---
description: プロジェクトのドキュメントディレクトリ構造をテンプレートに基づいて作成し、README で構成を説明する軽量セットアップワークフロー
auto_execution_mode: 1
---

# /a-001-SetupDocStructure

## 目的

- プロジェクトルートに標準化されたドキュメントディレクトリ構造を作成する。
- テンプレート（`@.windsurf/templates/project/`）の構造に従い、要件・振る舞い・ドメイン・設計の4階層を整備する。
- `docs/README.md` を作成し、ドキュメント構成と更新方針を明文化する。
- 後続のドキュメント作成ワークフロー（`/a-002-InitializeProject` など）がスムーズに実行できる環境を準備する。

## 前提

- プロジェクトのルートディレクトリへの書き込み権限があること。
- `docs/` ディレクトリが存在しない、または既存の構造を拡張したいこと。
- `.windsurf/templates/project/` 配下のテンプレート構造が最新状態であること。

## 手順

### 1. 現在の状態確認

- プロジェクトルートで `docs/` ディレクトリの存在を確認する：
  ```bash
  ls -la docs/ 2>/dev/null || echo "docs/ ディレクトリは存在しません"
  ```
- 既に `docs/` が存在する場合は、ユーザーに確認する：
  - 「既に `docs/` ディレクトリが存在します。既存の構造を保持したまま、不足しているディレクトリを追加しますか？」
  - ユーザーが「はい」と回答した場合のみ続行する。

### 2. ディレクトリ構造の作成

- テンプレート構造に従い、以下のディレクトリを作成する：

```
docs/
├── project/
│   ├── 01-requirements/    # 要件定義
│   ├── 02-behavior/         # 振る舞い定義
│   ├── 03-domain/           # ドメインモデル
│   └── 04-design/           # 設計
└── tasks/                   # 個別タスク
```

- `mkdir -p` コマンドで一括作成：
  ```bash
  mkdir -p docs/project/01-requirements docs/project/02-behavior docs/project/03-domain docs/project/04-design docs/tasks
  ```

- 作成結果を確認：
  ```bash
  find docs/ -type d | sort
  ```

### 3. docs/README.md の作成

- `docs/README.md` が既に存在する場合は、ユーザーに確認する：
  - 「`docs/README.md` が既に存在します。上書きしますか、それとも既存のファイルを保持しますか？」

- 以下の内容で `docs/README.md` を作成（または上書き）：

```markdown
# プロジェクトドキュメント

このディレクトリには、プロジェクト全体のドキュメントと個別タスクのドキュメントを管理します。

## 構成

### project/
プロジェクト全体のドキュメント。要件定義、設計、アーキテクチャなど、プロジェクトスコープ全体に関わる情報を記載します。

#### 01-requirements/ - 要件定義
- `01-system-overview.md`: システム概要（背景、目的、ターゲットユーザー、スコープ）
- `02-features-implemented.md`: 実装済み機能一覧
- `03-features-planned.md`: 予定機能一覧
- `04-non-functional-requirements.md`: 非機能要件（パフォーマンス、セキュリティ、可用性など）
- `05-user-stories.md`: ユーザーストーリー

#### 02-behavior/ - 振る舞い定義
- `01-scenarios.md`: シナリオ、ユースケース、ユーザージャーニー

#### 03-domain/ - ドメインモデル
- `01-domain-model.md`: エンティティ、値オブジェクト、集約、リポジトリ
- `02-ubiquitous-language.md`: ユビキタス言語（用語集）

#### 04-design/ - 設計
- `01-tech-stack.md`: 技術スタック（言語、フレームワーク、ライブラリ、インフラ）
- `02-repository-structure.md`: リポジトリ構造（ディレクトリ構成、命名規則）
- `03-screen-design.md`: 画面設計（画面一覧、画面遷移図、レスポンシブデザインポリシー）
- `04-data-model.md`: データモデル（ER図、テーブル定義）
- `05-api-spec.md`: API仕様（エンドポイント一覧、リクエスト/レスポンス）
- `06-architecture.md`: アーキテクチャ（システム構成図、コンポーネント図）
- `07-infrastructure.md`: インフラ（環境構成、デプロイフロー、監視）

### tasks/
個別タスクのドキュメント。Issue やチケット単位で作成します。

- `a-definition.md`: タスク定義テンプレート（目的、ユーザーストーリー、変更内容、受け入れ基準）
- `b-research.md`: リサーチドキュメントテンプレート（ベストプラクティス、既存コード調査、技術選定）
- `c-implementation.md`: 実装タスクリストテンプレート（フェーズ分割、ステップ、受け入れ基準）

## 更新方針

### プロジェクト全体のドキュメント (project/)
- プロジェクトのスコープ全体に影響する情報を記載
- チーム全体で共有すべき要件・設計・アーキテクチャを管理
- 更新時は関係者にレビューを依頼

### 個別タスクのドキュメント (tasks/)
- 特定の Issue やチケットに紐づく情報を記載
- タスク単位で作成・完了・アーカイブ
- 完了後は参照資料として保持、または削除

## ドキュメント作成ガイドライン

テンプレートの指示に従い、以下を心がけてください：

- **具体的**: 抽象的な表現を避け、数値・期限・制約を明確に記載
- **測定可能**: 成功基準やパフォーマンス目標を定量化
- **最新**: 変更があれば速やかに更新し、古い情報を残さない
- **簡潔**: 必要最低限の情報に絞り、詳細はコードやリンク先に委ねる

## ワークフロー

ドキュメント作成を支援するワークフローが用意されています：

- `/a-001-SetupDocStructure`: このディレクトリ構造を作成（初回のみ）
- `/a-002-InitializeProject`: 要件定義ドキュメントを作成（システム概要、機能要件、非機能要件、ユーザーストーリー）

詳細は `.windsurf/workflows/` を参照してください。
```

### 4. 作成結果の確認

- ディレクトリ構造とREADMEが正しく作成されたか確認：
  ```bash
  ls -R docs/
  ```

- ユーザーに作成結果を報告：
  ```
  ✅ ドキュメントディレクトリ構造を作成しました：

  docs/
  ├── README.md (作成済み - ドキュメント構成の説明)
  ├── project/
  │   ├── 01-requirements/
  │   ├── 02-behavior/
  │   ├── 03-domain/
  │   └── 04-design/
  └── tasks/

  次のステップ:
  - 要件定義を開始する場合: `/a-002-InitializeProject`
  - タスクドキュメントを作成する場合: `docs/tasks/` 配下に手動で作成
  ```

### 5. Git への追加（オプション）

- ユーザーに確認：「作成したディレクトリ構造を Git に追加しますか？」
- 「はい」の場合、以下を実行：
  ```bash
  git add docs/
  git status
  ```
- Git status の結果を表示し、コミットメッセージの提案をする：
  ```
  推奨コミットメッセージ:
  docs: initialize documentation structure

  - Add docs/ directory with standard structure
  - Add docs/README.md to explain documentation organization
  ```

## 完了条件

- プロジェクトルートに `docs/` ディレクトリが作成されている。
- `docs/project/` 配下に `01-requirements/`, `02-behavior/`, `03-domain/`, `04-design/` ディレクトリが存在する。
- `docs/tasks/` ディレクトリが存在する。
- `docs/README.md` が作成され、ドキュメント構成と更新方針が記載されている。
- ユーザーに作成結果が報告され、次のステップが提案されている。

## エスカレーション

- 既存の `docs/` ディレクトリが存在し、重要なファイルが含まれている場合：
  - 「既存のドキュメント構造が検出されました。上書きや削除のリスクがあるため、手動で確認してください。」と警告し、処理を中断する。
- ファイルシステムの権限エラーが発生した場合：
  - 「ディレクトリの作成に失敗しました。書き込み権限を確認してください。」とユーザーに通知する。
- Git リポジトリでない場合に Git 追加を試みた場合：
  - 「このディレクトリは Git リポジトリではありません。Git の初期化が必要な場合は `git init` を実行してください。」と案内する。
