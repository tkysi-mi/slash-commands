# タスク定義ドキュメント

<!--
このドキュメントについて:
  - 格納場所: docs/tasks/task000001-{スラッグ}/a-definition.md
  - 作成方法: /b-001-CreateTaskDefinition ワークフローで作成
  - 関連ドキュメント:
    - b-research.md (リサーチドキュメント)
    - c-implementation.md (実装タスクリスト)

このドキュメントの目的:
  - タスクの目的と範囲を明確化
  - 実装前に関係者間で認識を統一
  - 受け入れ基準を事前定義
  - 影響範囲の可視化

更新タイミング:
  - タスク着手前に作成
  - 要件変更時に更新
  - レビュー時に不明点を追記
-->

---

## 1. 目的

<!--
何を書くか: このタスクで解決する問題と提供する価値

記載のポイント:
  - 「何のために」このタスクをやるのか
  - ユーザーや開発者が得られる具体的なメリット
  - 現状の問題点や不便さ
  - このタスクで変わること

ベストプラクティス:
  - 具体的な数値があれば含める（例: 「ローディング時間を3秒→1秒に短縮」）
  - ステークホルダー視点で価値を記載（ユーザー、開発者、運用者など）
  - Before/After が明確に想像できる表現を使う
-->

| 項目 | 内容 |
|------|------|
| 解決する問題 | <!-- 例: ユーザー登録時のメール認証フローがなく、不正なメールアドレスが登録される --> |
| 提供する価値 | <!-- 例: メール認証により、有効なメールアドレスのみ登録可能になり、通知配信の精度が向上する --> |

---

## 2. ユーザーストーリー一覧

<!--
何を書くか: ユーザー視点でのタスクの要件

フォーマット: [役割]として、[目的]がしたい、なぜなら[理由]

記載のポイント:
  - 誰が（ペルソナ、役割）
  - 何をしたいか（機能、操作）
  - なぜそれが必要か（ビジネス価値、動機）

ベストプラクティス:
  - ストーリーIDは一意に（例: US-001, US-002）
  - 1つのストーリーは1つの価値に焦点を当てる
  - 技術的な詳細ではなくユーザー価値を記載
  - 複数の役割がある場合は分けて記載
-->

| ストーリーID | ストーリー |
|--------------|-----------|
| US-001 | <!-- 例: 新規ユーザーとして、登録時にメール認証を受けたい、なぜなら自分のメールアドレスが正しく登録されたことを確認したいから --> |
| US-002 | <!-- 例: 管理者として、認証済みユーザーのみに通知を送信したい、なぜなら配信エラーを減らしたいから --> |

---

## 3. 変更内容一覧

<!--
何を書くか: このタスクで変更する具体的な要素

記載のポイント:
  - 新規追加なのか、既存の変更なのか
  - 影響を受けるファイルやコンポーネント
  - 削除する機能があれば明記

ベストプラクティス:
  - 具体的なファイル名やコンポーネント名を含める
  - 「追加」「変更」「削除」を明示
  - 依存関係がある変更は順序を意識
-->

| カテゴリ | 変更内容 |
|----------|----------|
| 画面 | <!-- 例: RegisterForm.tsx にメールアドレス入力フィールド追加、EmailVerificationPage.tsx 新規作成 --> |
| データモデル | <!-- 例: User テーブルに email_verified (boolean), verification_token (string) フィールド追加 --> |
| API | <!-- 例: POST /api/auth/send-verification, POST /api/auth/verify-email エンドポイント追加 --> |
| その他 | <!-- 例: メール送信サービス (SendGrid) の API キー設定追加 --> |

---

## 4. 受け入れ基準

<!--
何を書くか: タスク完了の判断基準

記載のポイント:
  - 機能が正しく動作すること
  - エッジケースが処理されること
  - テストが通ること
  - ドキュメントが更新されていること

ベストプラクティス:
  - テスト可能な基準を記載（あいまいな表現を避ける）
  - 正常系だけでなく異常系も含める
  - パフォーマンス要件があれば明記
  - セキュリティ要件があれば明記
-->

- [ ] <!-- 例: ユーザー登録時に認証メールが送信される -->
- [ ] <!-- 例: メール内のリンクをクリックするとメールアドレスが認証される -->
- [ ] <!-- 例: 認証されていないユーザーは特定機能にアクセスできない -->
- [ ] <!-- 例: 無効なトークンでアクセスした場合、適切なエラーメッセージが表示される -->
- [ ] <!-- 例: ユニットテスト、統合テストが全て通る -->

---

## メモ

<!--
タスク定義に関する補足情報

記載すべき内容:
  - 技術的な制約や前提条件
  - 関連する Issue や PR のリンク
  - 参考資料（仕様書、デザインモックなど）
  - 既知の問題や懸念事項
  - 将来的な拡張予定

例:
- 関連 Issue: #123
- 参考デザイン: https://figma.com/file/...
- 注意: メール送信は非同期処理で実装する
- 今後の拡張: SMS 認証も追加予定
-->
