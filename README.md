# slash-commands

## リポジトリ概要

Windsurfで活用するスラッシュコマンドとワークフローの保管庫。調査・要件定義から実装、テスト、デプロイ、Git運用までの開発プロセスを対象としたMarkdownドキュメントを蓄積し、他プロジェクトでも即座に呼び出せるナレッジベースを目指す。

## 目的

- 反復的な開発タスクを標準化し、スラッシュコマンドとして再利用可能にする。
- 調査、仕様策定、実装支援、デバッグ、レビュー、リリース、Git管理など各フェーズのベストプラクティスを明文化する。
- 実行可能コードは置かず、Windsurfでのコマンド入力やドキュメント参照に最適化したMarkdown中心の構成を維持する。

## ディレクトリ構成

- `.windsurf/workflows/` — スラッシュコマンド定義（各種ワークフローMarkdown）
  - `a-NNN-*.md` — プロジェクト設計ワークフロー（要件定義、設計、アーキテクチャ）
  - `b-NNN-*.md` — タスク管理ワークフロー（タスク作成、リサーチ、実装計画）
  - `c-NNN-*.md` — 実装実行ワークフロー（ステップバイステップ実装）
  - `x-Object-Action.md` — 補助的なワークフロー（例: `x-Code-Refactor`, `x-CI-Setup`, `x-Repository-PushToGithub`）
  - `z-*.md` — メタワークフロー（ワークフロー作成支援など）
- `.windsurf/templates/` — テンプレート定義（各種テンプレートMarkdown）
  - `project/` — プロジェクトレベルのテンプレート
  - `tasks/task-template/` — タスクレベルのテンプレート
    - `a-definition.md` — タスク定義テンプレート
    - `b-research.md` — リサーチテンプレート
    - `c-implementation.md` — 実装タスクリストテンプレート
- `README.md` — リポジトリの使い方と方針
- `CLAUDE.md` — Claude Code向けプロジェクト説明
- `slash-commands-best-practices.md` - スラッシュコマンドのベストプラクティス

## 使い方

### 基本的な使い方

1. Windsurfで必要なワークフローを参照したいタイミングで該当Markdownを開く。
2. コマンド化したい手順はスラッシュコマンドとしてコピーし、自身のプロジェクトで呼び出して利用する。
3. 新規ワークフローを追加する際は`.windsurf/workflows/`配下にMarkdownを作成し、ファイル名は用途が想起できるスラッグ形式にする（例: `jira-ticket.md`）。

### ワークフロー体系

本リポジトリは開発ライフサイクル全体をカバーする4つのワークフロー系列を提供します：

- **A系列**: プロジェクト設計ワークフロー（要件定義、ドメインモデル、設計）
- **B系列**: タスク管理ワークフロー（タスク作成、リサーチ、実装計画）
- **C系列**: 実装実行ワークフロー（ステップバイステップ実装、ドキュメント更新）
- **X系列**: 補助的なワークフロー（リファクタリング、CI/CD、コード生成など）

## プロジェクト設計ワークフロー（A系列）

プロジェクト開始時に一度実行し、要件定義からドメインモデル、設計までを体系的に作成します。

### 実行順序

**要件・ドメインフェーズ**（a-001 〜 a-006）:
1. `/a-001-SetupDocStructure` — ドキュメント構造のセットアップ
2. `/a-002-InitializeProject` — プロジェクト初期化（課題、解決策、スコープ）
3. `/a-003-CreateScenarios` — BDD形式でのシナリオ定義（Gherkin）
4. `/a-004-DefineDomainModel` — ドメインモデル定義（Event Storming）
5. `/a-005-CreateDomainDiagram` — DDD設計（Bounded Context、Aggregate）
6. **`/a-006-ReviewRequirementsDomain`** — 要件とドメインモデルのレビュー ⭐

**設計フェーズ**（a-007 〜 a-014）:
7. `/a-007-DefineTechStack` — 技術スタック選定
8. `/a-008-DefineRepositoryStructure` — リポジトリ構造定義
9. `/a-009-DefineScreenDesign` — 画面設計（Empty State重視）
10. `/a-010-DefineDataModel` — データモデル設計（ERD）
11. `/a-011-DefineAPISpec` — API仕様定義
12. `/a-012-DefineArchitecture` — アーキテクチャ設計（ADR）
13. `/a-013-DefineInfrastructure` — インフラ設計（RPO/RTO）
14. **`/a-014-ReviewDesign`** — 設計ドキュメントの一貫性レビュー ⭐

### レビューワークフローの役割

- **a-006**: 要件定義とドメインモデル間の一貫性をチェック（ユーザーストーリー ↔ シナリオ ↔ ドメインモデル）
- **a-014**: 設計ドキュメント間の一貫性をチェック（データモデル ↔ API ↔ 画面設計 ↔ アーキテクチャ）

これらのレビューワークフローにより、実装前にドキュメント間の不整合を検出し、手戻りを防止します。

## タスク管理ワークフロー（B系列）

タスクの計画から実装まで、以下のワークフローを順次実行します：

1. **タスクディレクトリ作成**: `/b-000-CreateTaskDirectory`
   - タスクID自動採番（task000001, task000002, ...）
   - ディレクトリ作成: `docs/tasks/task000001-{スラッグ}/`
   - テンプレートファイル（a-definition.md, b-research.md, c-implementation.md）を自動コピー

2. **タスク定義**: `/b-001-CreateTaskDefinition`
   - 目的の明確化（解決する問題、提供する価値）
   - ユーザーストーリーの定義
   - 変更内容の詳細化（画面、データモデル、API、ビジネスロジック）
   - 受け入れ基準の定義（正常系、異常系、テスト、セキュリティ）

3. **リサーチ**: `/b-002-CreateTaskResearch`
   - ベストプラクティスの調査
   - 既存コードの調査と再利用可能性の確認
   - 技術選定（ライブラリ、フレームワーク）
   - 技術的リスクの洗い出しと軽減策

4. **実装計画**: `/b-003-CreateTaskImplementation`
   - フェーズ分割（1-3日粒度）
   - ステップ定義（1-3時間粒度）
   - 成果物の明確化（具体的なファイル名）
   - フェーズごとの受け入れ基準

5. **タスクレビュー**: `/b-004-ReviewTask` ⭐
   - タスク定義 ↔ 実装計画の一貫性チェック
   - リサーチ ↔ 実装計画の整合性検証
   - 変更内容・ユーザーストーリーのカバレッジ確認
   - 技術選定の反映、リスク軽減策の確認
   - 実装開始可否の判定（優/良/可/不可）

### タスクレビューの重要性

b-004は実装開始前の「最後の砦」として、以下を保証します：
- すべての変更内容に実装ステップが存在する（漏れ防止）
- すべてのユーザーストーリーが実装でカバーされている（要件充足）
- 技術的リスクの軽減策が計画されている（リスク管理）
- 既存コンポーネントが再利用されている（車輪の再発明防止）

## 実装実行ワークフロー（C系列）

タスクレビュー（b-004）完了後、実装を実行し、完了後にドキュメントを更新します。

### 実行順序

1. **実装実行**: `/c-001-ImplementTask`
   - 各ステップを順次実行（speckit.implementスタイル）
   - 依存関係を尊重、並列実行を最適化（`[P]`マーク）
   - ステップごとにテスト実行とチェックボックス更新
   - フェーズごとに受け入れ基準を確認
   - 最終テスト、コミット、PR作成

2. **ドキュメント更新**: `/c-002-UpdateDocumentation`
   - 実装完了後にドキュメントを実装内容に合わせて更新
   - タスクドキュメント更新（a-definition.md, b-research.md, c-implementation.md）
   - プロジェクトドキュメント更新（features-implemented, domain-model, api-spec, data-model）
   - 計画と実装の差異を記録（振り返り）
   - README, CHANGELOG, .env.example の更新
   - ドキュメント間の整合性確認

### 実装

c-001は以下の原則に従います：
- **仕様駆動開発**: タスク定義とリサーチが実行可能な仕様として機能
- **段階的な実装**: ステップごとに進める（1ステップ = 1-3時間）
- **依存関係の尊重**: 順序を守り、前ステップ完了を確認
- **並列実行の最適化**: `[P]`マークで独立ステップを並列実行
- **継続的な検証**: 各ステップでテスト実行、受け入れ基準を確認

## 補助的なワークフロー（X系列）

実装中に必要となる補助的なタスクを実行するワークフローです。Object-Action命名規則に従います。

### 主要なワークフロー

**コンテキスト把握・要件明確化**:
- `/x-Context-CatchUp` — プロジェクト状況の把握
- `/x-Requirements-Clarify` — 要件の明確化

**コード品質・リファクタリング**:
- `/x-Code-Refactor` — リファクタリング支援
- `/x-Code-ResearchAndReview` — コードレビュー
- `/x-Problem-RootCauseAnalysis` — 根本原因分析

**開発環境・CI/CD**:
- `/x-DevEnvironment-Setup` — 開発環境セットアップ
- `/x-CI-Setup` — CI/CDセットアップ
- `/x-CI-FixFailure` — CI失敗修正
- `/x-Logging-Add` — ログ実装

**コード生成・最適化**:
- `/x-Component-Create` — UIコンポーネント生成
- `/x-Migration-Create` — マイグレーション作成
- `/x-Database-Seed` — データベースシード
- `/x-Bundle-Optimize` — バンドル最適化

**Git・リポジトリ管理**:
- `/x-Repository-Push` — GitHub/GitLabへのプッシュ（汎用）
- `/x-Repository-PushToGithub` — GitHubへのプッシュ

**その他**:
- `/x-Dependencies-Update` — 依存関係更新
- `/x-Accessibility-Check` — アクセシビリティ監査

### X系列の特徴

- **フレームワーク非依存**: React/Vue/Svelte、Prisma/TypeORM、Webpack/Viteなど複数の技術に対応
- **再利用可能**: どのプロジェクトでも即座に利用可能
- **チェックリスト形式**: 実行漏れを防止
- **ベストプラクティス統合**: 公式ドキュメントや業界標準を反映

## 完全な開発ライフサイクル

本システムは以下の順序で実行することで、要件定義から実装、ドキュメント更新まで一貫した開発プロセスを実現します：

```
【プロジェクト開始時】（1回のみ）
┌─────────────────────────────────────────┐
│ A系列: プロジェクト設計                    │
├─────────────────────────────────────────┤
│ a-001 〜 a-005: 要件・ドメイン定義         │
│ a-006: レビュー ⭐                        │
│ a-007 〜 a-013: 設計                     │
│ a-014: レビュー ⭐                        │
└─────────────────────────────────────────┘
              ↓
【各機能開発時】（タスクごとに繰り返し）
┌─────────────────────────────────────────┐
│ B系列: タスク管理                         │
├─────────────────────────────────────────┤
│ b-000: タスクディレクトリ作成              │
│ b-001: タスク定義                         │
│ b-002: リサーチ                           │
│ b-003: 実装計画                           │
│ b-004: レビュー ⭐                        │
└─────────────────────────────────────────┘
              ↓
┌─────────────────────────────────────────┐
│ C系列: 実装実行                           │
├─────────────────────────────────────────┤
│ c-001: 実装実行（spec-kitスタイル）       │
│ c-002: ドキュメント更新                   │
└─────────────────────────────────────────┘
              ↓
【実装中に随時】
┌─────────────────────────────────────────┐
│ X系列: 補助的なワークフロー               │
├─────────────────────────────────────────┤
│ x-Code-Refactor, x-CI-Setup,              │
│ x-Component-Create, x-Repository-Push など│
└─────────────────────────────────────────┘
```

### レビューワークフローの位置づけ

3つのレビューワークフロー（⭐マーク）が品質を保証します：

| レビュー | タイミング | 対象 | 効果 |
|---------|----------|------|------|
| **a-006** | 要件・ドメイン完成時 | 要件 ↔ シナリオ ↔ ドメインモデル | ドメイン設計の妥当性検証 |
| **a-014** | 設計完成時 | データモデル ↔ API ↔ 画面 ↔ アーキテクチャ | 設計の一貫性検証 |
| **b-004** | 各タスク実装前 | タスク定義 ↔ リサーチ ↔ 実装計画 | 実装漏れ防止 |

### タスクディレクトリ構造の例

```
docs/
└── tasks/
    ├── task000001-email-verification/
    │   ├── a-definition.md      # タスク定義（目的、ユーザーストーリー、受け入れ基準）
    │   ├── b-research.md         # リサーチ（ベストプラクティス、既存コード調査）
    │   └── c-implementation.md   # 実装タスクリスト（フェーズ、ステップ、受け入れ基準）
    ├── task000002-user-profile/
    │   ├── a-definition.md
    │   ├── b-research.md
    │   └── c-implementation.md
    └── task000003-payment-integration/
        ├── a-definition.md
        ├── b-research.md
        └── c-implementation.md
```

各タスクディレクトリには3つのドキュメントが含まれ、タスクの計画から実装まで一貫して管理できます。

## 更新ポリシー

- 各ドキュメントは最新の開発手法に合わせて継続的に改善する。
- 重複や冗長な情報は統合し、DRY原則を徹底する。
- 追加の開発フェーズや管理領域が生じた場合は、該当するスラッシュコマンドを新設してREADMEにも追記する。